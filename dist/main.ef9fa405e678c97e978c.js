(()=>{"use strict";var e={953:(e,t,n)=>{n.r(t)},4:(e,t,n)=>{n.r(t)},985:(e,t,n)=>{n.r(t)},307:(e,t,n)=>{n.r(t)},752:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{c(a.next(e))}catch(e){r(e)}}function o(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AppGame=void 0;const i=n(229);t.AppGame=class{constructor(e){this.rootElement=e,this.game=new i.Game,this.rootElement.appendChild(this.game.element)}start(){return a(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=(yield e.json())[0],n=t.images.map((e=>`${t.category}/${e}`));this.game.newGame(n)}))}}},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,n(953);const a=n(583);class i extends a.BaseComponent{constructor(e){super("div",["card-container"]),this.image=e,this.isFlipped=!1,this.element.innerHTML=`\n        <div class="card">\n          <div class="card-front" style='background-image: url("./images/${e}');">\n          <div class="result"></div>\n          </div>\n          <div class="card-back"></div>\n        </div>\n    `}addClass(e){const t=document.querySelectorAll(".result");t&&t.forEach((t=>{t.classList.add(e),t.classList.remove(".result")}))}deleteClass(e){const t=document.querySelectorAll(".result");t&&t.forEach((t=>{t.classList.remove(e)}))}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}}t.Card=i},610:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0,n(4);const a=n(583);class i extends a.BaseComponent{constructor(){super("div",["cards-field"]),this.cards=[]}clear(){this.cards=[],this.element.innerHTML=""}addCards(e){this.cards=e,this.cards.forEach((e=>{this.element.appendChild(e.element)})),setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),5e3)}}t.CardsField=i},229:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{c(a.next(e))}catch(e){r(e)}}function o(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const i=n(680),r=n(583),s=n(977),o=n(610);class c extends r.BaseComponent{constructor(){super(),this.isAnimation=!1,this.cardsField=new o.CardsField,this.element.appendChild(this.cardsField.element)}newGame(e){this.cardsField.clear();const t=e.concat(e).map((e=>new s.Card(e))).sort((()=>Math.random()-.5));t.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),this.cardsField.addCards(t)}cardHandler(e){return a(this,void 0,void 0,(function*(){if(e.isFlipped&&!this.isAnimation){if(this.isAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);this.activeCard.image!==e.image&&(console.log(this.activeCard),console.log(e),e.addClass("false"),this.activeCard.addClass("false"),yield i.delay(1e3),e.deleteClass("false"),this.activeCard.deleteClass("false"),yield i.delay(2e3),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack()])),this.activeCard=void 0,this.isAnimation=!1}}))}}t.Game=c},370:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(547)),r=[{id:"match-page",text:"Start Game"},{id:"about-page",text:"About Game"},{id:"score-page",text:"Best Score"},{id:"settings-page",text:"Game Settings"}];class s extends i.default{constructor(e,t){super(e,t)}renderPageButtons(){const e=document.createElement("div");r.forEach((t=>{const n=document.createElement("a");n.href=`#${t.id}`,n.innerText=t.text,e.append(n)})),this.container.append(e)}render(){return this.renderPageButtons(),this.container}}t.default=s},547:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.container=document.createElement(e),this.container.className=t}render(){return this.container}}},168:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.container=document.createElement("div"),this.container.id=e}createHeaderTitle(e){const t=document.createElement("h1");return t.innerText=e,t}render(){return this.container}}n.TextObject={},t.default=n},607:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(307),n(985);(new(a(n(416)).default)).run();const i=document.querySelector(".button-registration");i&&i.addEventListener("click",(function(){document.body.insertAdjacentHTML("afterbegin",'\n  <div class="popup">\n    <div class="container-popup">\n    <h1 class="h1-popup">Registr new Player</h1>\n      <button class="btn close">Cancel</button>\n      <button class="btn add">Add user</button>\n      <div class="image-user"></div>\n      <div class="form-popup">\n        <form class="form-registration">\n          <p class="p-form">First Name\n            <input type="text" name="username" required placeholder="Enter Name"/>\n          </p>\n          <p class="p-form">Last Name\n            <input type="text" name="last-name" required placeholder="Enter Last Name"/>\n          </p>\n          <p class="p-form">Email\n            <input type="email" name="email" required placeholder="Enter Email"/>\n          </p>\n        </form>\n      </div>\n    </div>\n  </div>\n');const e=document.querySelector(".close");null==e||e.addEventListener("click",(()=>{const e=document.querySelector(".popup");e&&document.body.removeChild(e)}))}))},503:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(168));class r extends i.default{constructor(e){super(e)}render(){const e=this.createHeaderTitle(r.TextObject.MainTitle);return this.container.append(e),this.container.insertAdjacentHTML("afterbegin",r.html),this.container}}r.TextObject={MainTitle:"How to play?"},r.html='\n      <button class="button-registration">register new player</button>\n      <div class="container">\n          <div class="image"></div>\n          <div class="image-settings"></div>\n          <div class="image-game"></div>\n          <div class="block registr">\n            <div class="number">\n              <p>1</p>\n            </div>\n            <p class="info">Register new player in game</p>\n          </div>\n          <div class="block configure">\n            <div class="number">\n              <p>2</p>\n            </div>\n            <p class="info">Configure your game settings</p>\n          </div>\n          <div class="block start">\n            <div class="number">\n              <p>3</p>\n            </div>\n            <p class="info">Start you new game! Remember card positions and match it before times up.</p>\n          </div>\n      </div>\n  ',r.buttonPopup=document.querySelector(".button-registration"),t.default=r},416:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(503)),r=a(n(571)),s=a(n(291)),o=a(n(403)),c=a(n(489)),d=a(n(370)),l=n(752);class u{constructor(){this.initialPage=new r.default("score-page"),this.header=new d.default("header","header")}static renderNewPage(e){const t=document.querySelector(`#${u.defaultPageId}`),n=document.querySelector(`#${this.matchID}`);t&&t.remove(),n&&n.remove();let a=null;if(a="score-page"===e?new r.default(e):"settings-page"===e?new s.default(e):"about-page"===e?new i.default(e):"match-page"===e?new o.default(e):new c.default(e,404),a){const t=a.render();t.id=u.defaultPageId,"match-page"===e&&(t.id=u.matchID),u.container.append(t)}}enableRouteChange(){const e=document.querySelectorAll("a");window.addEventListener("hashchange",(()=>{const t=window.location.hash.slice(1);u.renderNewPage(t);const n=document.querySelector(`a[href="#${t}"]`);if(e.forEach((e=>{e.classList.remove("click")})),null==n||n.classList.add("click"),"match-page"===t){const e=document.getElementById("app");if(!e)throw Error("App root element not found");new l.AppGame(e).start()}const a=document.querySelector(".button-registration");a&&a.addEventListener("click",(()=>{document.body.insertAdjacentHTML("afterbegin",u.html);const e=document.querySelector(".close");null==e||e.addEventListener("click",(()=>{const e=document.querySelector(".popup");e&&document.body.removeChild(e)}))}))}))}run(){u.container.append(this.header.render());const e=window.location.hash.slice(1);console.log(e);const t=document.querySelector(`a[href="#${e}"]`);if(null==t||t.classList.add("click"),u.renderNewPage(e),"match-page"===e){const e=document.getElementById("app");if(!e)throw Error("App root element not found");new l.AppGame(e).start()}this.enableRouteChange()}}u.container=document.body,u.defaultPageId="current-page",u.matchID="app",u.html='\n  <div class="popup">\n    <div class="container-popup">\n    <h1 class="h1-popup">Registr new Player</h1>\n      <button class="btn close">Cancel</button>\n      <button class="btn add">Add user</button>\n      <div class="image-user"></div>\n      <div class="form-popup">\n        <form class="form-registration">\n          <p class="p-form">First Name\n            <input type="text" name="username" required placeholder="Enter Name"/>\n          </p>\n          <p class="p-form">Last Name\n            <input type="text" name="last-name" required placeholder="Enter Last Name"/>\n          </p>\n          <p class="p-form">Email\n            <input type="email" name="email" required placeholder="Enter Email"/>\n          </p>\n        </form>\n      </div>\n    </div>\n  </div>\n  ',t.default=u},489:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(168));class r extends i.default{constructor(e,t){super(e),this.errorType=t}render(){const e=this.createHeaderTitle(r.TextObject[this.errorType]);return this.container.append(e),this.container}}r.TextObject={404:"Error! The page was not found, Navigate to a new page, please (баг при старте:) )"},t.default=r},403:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(168));class r extends i.default{constructor(e){super(e)}render(){const e=this.createHeaderTitle(r.TextObject.MainTitle);return this.container.append(e),this.container}}r.TextObject={MainTitle:"Match Game"},t.default=r},571:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(168));class r extends i.default{constructor(e){super(e)}render(){const e=this.createHeaderTitle(r.TextObject.MainTitle);return this.container.append(e),this.container}}r.TextObject={MainTitle:"Best players"},t.default=r},291:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(168));class r extends i.default{constructor(e){super(e)}render(){const e=this.createHeaderTitle(r.TextObject.MainTitle);return this.container.append(e),this.container.insertAdjacentHTML("afterbegin",r.html),this.container.style.background="none",this.container}}r.TextObject={MainTitle:"Game Cards"},r.html='\n  <div class="container-settings">\n  <form action="#" class="form-settings">\n  <p>Game Cards</p>\n  <select name="cards" id="cards"  >\n      <option value="0" selected>select game cards type</option>\n      <option value="animal" >animal</option>\n      <option value="different">different</option>\n      <option value="car">car</option>\n  </select>\n</form>\n\n<form action="#" class="form-settings diff">\n  <p>Difficulty</p>\n  <select name="cards" id="cards"  >\n      <option value="0" selected>select game type</option>\n      <option value="6" >2*3</option>\n      <option value="8">2*4</option>\n      <option value="12">2*6</option>\n  </select>\n</form>\n  </div>\n  ',t.default=r},680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)})();